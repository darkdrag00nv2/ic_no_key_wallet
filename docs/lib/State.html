<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="../styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="../examples/NoKeyWallet.html">examples/NoKeyWallet</a></li></li><li><li><a href="../lib/EvmUtil.html">lib/EvmUtil</a></li></li><li><li><a href="../lib/IcManagement.html">lib/IcManagement</a></li></li><li><li><a href="../lib/NoKeyWalletLib.html">lib/NoKeyWalletLib</a></li></li><li><li><a href="../lib/State.html">lib/State</a></li></li><li><li><a href="../lib/Types.html">lib/Types</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.Env">Env</a></li></li><li><li><a href="#type.TransactionData">TransactionData</a></li></li><li><li><a href="#type.TransactionChainData">TransactionChainData</a></li></li><li><li><a href="#type.UserData">UserData</a></li></li><li><li><a href="#type.Config">Config</a></li></li><li><li><a href="#type.State">State</a></li></li><li><li><a href="#initUserData">initUserData</a></li></li><li><li><a href="#initState">initState</a></li></li><li><li><a href="#getUserData">getUserData</a></li></li><li><li><a href="#addUserPublicKey">addUserPublicKey</a></li></li><li><li><a href="#addTransactionForUser">addTransactionForUser</a></li></li></ul></nav><div class="documentation"><h1>lib/State</h1><p>State stored by the library.</p>
<p>As a library user, you should rarely have to interact with this module directly.</p>
<div class="declaration"><h4 class="type-declaration" id="type.Env"><span class="keyword">type </span><span class="type">Env</span> = {#Local; #Staging; #Production}</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.TransactionData"><span class="keyword">type </span><span class="type">TransactionData</span> = { data : [<span class="type">Nat8</span>]; timestamp : <a href="#type.Time"><span class="type">Time</span></a> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.TransactionChainData"><span class="keyword">type </span><span class="type">TransactionChainData</span> = { <span class="keyword">var </span>last_nonce : [<span class="type">Nat8</span>]; transactions : <a href="#type.StableBuffer"><span class="type">StableBuffer</span></a>&lt;<a href="#type.TransactionData"><span class="type">TransactionData</span></a>&gt; }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.UserData"><span class="keyword">type </span><span class="type">UserData</span> = { <span class="keyword">var </span>public_key : <span class="type">Blob</span>; <span class="keyword">var </span>transactions : <a href="#type.Map"><span class="type">Map</span></a>&lt;<span class="type">Nat64</span>, <a href="#type.TransactionChainData"><span class="type">TransactionChainData</span></a>&gt; }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.Config"><span class="keyword">type </span><span class="type">Config</span> = { env : <a href="#type.Env"><span class="type">Env</span></a>; key_name : <span class="type">Text</span>; sign_cycles : <span class="type">Nat</span> }</h4><p></p></div><div class="declaration"><h4 class="type-declaration" id="type.State"><span class="keyword">type </span><span class="type">State</span> = { <span class="keyword">var </span>users : <a href="#type.Map"><span class="type">Map</span></a>&lt;<span class="type">Principal</span>, <a href="#type.UserData"><span class="type">UserData</span></a>&gt;; config : <a href="#type.Config"><span class="type">Config</span></a> }</h4><p></p></div><div class="declaration"><h4 class="function" id="initUserData"><code><span class="keyword">public func </span><span class="fnname">initUserData</span>(<span class="parameter">pub_key</span> : <span class="type">Blob</span>) : <a href="#type.UserData"><span class="type">UserData</span></a></code></h4><p></p></div><div class="declaration"><h4 class="function" id="initState"><code><span class="keyword">public func </span><span class="fnname">initState</span>(<span class="parameter">env</span> : <a href="#type.Env"><span class="type">Env</span></a>) : <a href="#type.State"><span class="type">State</span></a></code></h4><p></p></div><div class="declaration"><h4 class="function" id="getUserData"><code><span class="keyword">public func </span><span class="fnname">getUserData</span>(<span class="parameter">s</span> : <a href="#type.State"><span class="type">State</span></a>, <span class="parameter">p</span> : <span class="type">Principal</span>) : ?<a href="#type.UserData"><span class="type">UserData</span></a></code></h4><p></p></div><div class="declaration"><h4 class="function" id="addUserPublicKey"><code><span class="keyword">public func </span><span class="fnname">addUserPublicKey</span>(<br/>  <span class="parameter">s</span> : <a href="#type.State"><span class="type">State</span></a>, <br/>  <span class="parameter">p</span> : <span class="type">Principal</span>, <br/>  <span class="parameter">pub_key</span> : <span class="type">Blob</span><br/>)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="addTransactionForUser"><code><span class="keyword">public func </span><span class="fnname">addTransactionForUser</span>(<br/>  <span class="parameter">s</span> : <a href="#type.State"><span class="type">State</span></a>, <br/>  <span class="parameter">p</span> : <span class="type">Principal</span>, <br/>  <span class="parameter">txn_data</span> : <a href="#type.TransactionData"><span class="type">TransactionData</span></a>, <br/>  <span class="parameter">chain_id</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">nonce</span> : [<span class="type">Nat8</span>]<br/>)</code></h4><p></p></div></div></body></html>