<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="../styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="../examples/NoKeyWallet.html">examples/NoKeyWallet</a></li></li><li><li><a href="../lib/EvmUtil.html">lib/EvmUtil</a></li></li><li><li><a href="../lib/IcManagement.html">lib/IcManagement</a></li></li><li><li><a href="../lib/NoKeyWalletLib.html">lib/NoKeyWalletLib</a></li></li><li><li><a href="../lib/State.html">lib/State</a></li></li><li><li><a href="../lib/Types.html">lib/Types</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.NoKeyWalletLib">NoKeyWalletLib</a></li></li><li><li><a href="#init">init</a></li></li><li><li><a href="#createAddress">createAddress</a></li></li><li><li><a href="#signTransaction">signTransaction</a></li></li><li><li><a href="#getCallerHistory">getCallerHistory</a></li></li><li><li><a href="#clearCallerHistory">clearCallerHistory</a></li></li><li><li><a href="#deployEvmContract">deployEvmContract</a></li></li><li><li><a href="#transferErc20">transferErc20</a></li></li></ul></nav><div class="documentation"><h1>lib/NoKeyWalletLib</h1><p>Stable class adding wallet support for EVM based chains.</p>
<p>TODO: Add more details</p>
<div class="declaration"><h4 class="type-declaration" id="type.NoKeyWalletLib"><span class="keyword">type </span><span class="type">NoKeyWalletLib</span> = { evmUtil : <a href="#type.EvmUtil"><span class="type">EvmUtil</span></a>; icManagement : <a href="#type.IcManagement"><span class="type">IcManagement</span></a>; state : <a href="#type.State"><span class="type">State</span></a> }</h4><p></p></div><div class="declaration"><h4 class="function" id="init"><code><span class="keyword">public func </span><span class="fnname">init</span>(<br/>  <span class="parameter">initEvmUtil</span> : <a href="#type.EvmUtil"><span class="type">EvmUtil</span></a>, <br/>  <span class="parameter">initIcManagement</span> : <a href="#type.IcManagement"><span class="type">IcManagement</span></a>, <br/>  <span class="parameter">env</span> : <a href="#type.Env"><span class="type">Env</span></a><br/>) : <a href="#type.NoKeyWalletLib"><span class="type">NoKeyWalletLib</span></a></code></h4><p></p></div><div class="declaration"><h4 class="function" id="createAddress"><code><span class="keyword">public func </span><span class="fnname">createAddress</span>(<span class="parameter">lib</span> : <a href="#type.NoKeyWalletLib"><span class="type">NoKeyWalletLib</span></a>, <span class="parameter">caller_principal</span> : <span class="type">Principal</span>) : <span class="keyword">async </span><a href="#type.Result"><span class="type">Result</span></a>&lt;<a href="#type.CreateAddressResponse"><span class="type">CreateAddressResponse</span></a>&gt;</code></h4><p><p>Create an address for the provided principal.</p>
<p>The address is saved in the user state and can be used later to sign a transaction.</p>
</p></div><div class="declaration"><h4 class="function" id="signTransaction"><code><span class="keyword">public func </span><span class="fnname">signTransaction</span>(<br/>  <span class="parameter">lib</span> : <a href="#type.NoKeyWalletLib"><span class="type">NoKeyWalletLib</span></a>, <br/>  <span class="parameter">raw_txn</span> : [<span class="type">Nat8</span>], <br/>  <span class="parameter">chain_id</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">caller_principal</span> : <span class="type">Principal</span>, <br/>  <span class="parameter">save_history</span> : <span class="type">Bool</span><br/>) : <span class="keyword">async </span><a href="#type.Result"><span class="type">Result</span></a>&lt;<a href="#type.SignTransactionResponse"><span class="type">SignTransactionResponse</span></a>&gt;</code></h4><p><p>Sign the provided raw transaction.</p>
<p>The transaction will be signed for the provided chain_id.
It will saved in the transaction history for the user if save_history is true.</p>
</p></div><div class="declaration"><h4 class="function" id="getCallerHistory"><code><span class="keyword">public func </span><span class="fnname">getCallerHistory</span>(<br/>  <span class="parameter">lib</span> : <a href="#type.NoKeyWalletLib"><span class="type">NoKeyWalletLib</span></a>, <br/>  <span class="parameter">chain_id</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">caller_principal</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async </span><a href="#type.Result"><span class="type">Result</span></a>&lt;<a href="#type.UserResponse"><span class="type">UserResponse</span></a>&gt;</code></h4><p><p>Get the transaction history of the principal for the provided chain_id.</p>
</p></div><div class="declaration"><h4 class="function" id="clearCallerHistory"><code><span class="keyword">public func </span><span class="fnname">clearCallerHistory</span>(<br/>  <span class="parameter">lib</span> : <a href="#type.NoKeyWalletLib"><span class="type">NoKeyWalletLib</span></a>, <br/>  <span class="parameter">chain_id</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">caller_principal</span> : <span class="type">Principal</span><br/>) : <span class="keyword">async </span><a href="#type.Result"><span class="type">Result</span></a>&lt;()&gt;</code></h4><p><p>Clear the transaction history of the principal for the provided chain_id.</p>
</p></div><div class="declaration"><h4 class="function" id="deployEvmContract"><code><span class="keyword">public func </span><span class="fnname">deployEvmContract</span>(<br/>  <span class="parameter">lib</span> : <a href="#type.NoKeyWalletLib"><span class="type">NoKeyWalletLib</span></a>, <br/>  <span class="parameter">caller_principal</span> : <span class="type">Principal</span>, <br/>  <span class="parameter">bytecode</span> : [<span class="type">Nat8</span>], <br/>  <span class="parameter">chain_id</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">max_priority_fee_per_gas</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">gas_limit</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">max_fee_per_gas</span> : <span class="type">Nat64</span><br/>) : <span class="keyword">async </span><a href="#type.Result"><span class="type">Result</span></a>&lt;<a href="#type.DeployContractResponse"><span class="type">DeployContractResponse</span></a>&gt;</code></h4><p><p>Create a signed EVM contract with the provided parameters.</p>
</p></div><div class="declaration"><h4 class="function" id="transferErc20"><code><span class="keyword">public func </span><span class="fnname">transferErc20</span>(<br/>  <span class="parameter">lib</span> : <a href="#type.NoKeyWalletLib"><span class="type">NoKeyWalletLib</span></a>, <br/>  <span class="parameter">caller_principal</span> : <span class="type">Principal</span>, <br/>  <span class="parameter">chain_id</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">max_priority_fee_per_gas</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">gas_limit</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">max_fee_per_gas</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">address</span> : [<span class="type">Nat8</span>], <br/>  <span class="parameter">value</span> : <span class="type">Nat64</span>, <br/>  <span class="parameter">contract_address</span> : [<span class="type">Nat8</span>]<br/>) : <span class="keyword">async </span><a href="#type.Result"><span class="type">Result</span></a>&lt;<a href="#type.DeployContractResponse"><span class="type">DeployContractResponse</span></a>&gt;</code></h4><p><p>Create a signed txn to transfer erc 20 with the provided parameters.</p>
</p></div></div></body></html>